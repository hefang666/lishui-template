(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bb21358"],{"02d1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"workOrder-box button-box"},[s("div",{staticClass:"header-box"},[s("div",{staticClass:"header-left"},[s("el-button-group",t._l(t.statusList,(function(e,i){return s("el-button",{key:i,class:{"item-active":i==t.currentIndex},attrs:{type:"primary",plain:""},on:{click:function(e){return t.searchConditional(i)}}},[t._v(" "+t._s(e)+" ")])})),1),s("el-button",{staticClass:"screen-button",attrs:{type:"primary",plain:""},on:{click:t.showScreen}},[t._v(t._s(t.screen)+" ")])],1),s("div",{staticClass:"header-right"},[s("el-button-group",[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addOrder}},[t._v("新增")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.close}},[t._v("关闭")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.modify}},[t._v("修改")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.See}},[t._v("查看")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.del}},[t._v("删除")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.exportData}},[t._v("导出")])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isScreen,expression:"isScreen"}],staticClass:"screen-box select_box"},[s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("报告人：")]),s("div",{staticClass:"item-content"},[""!=t.person?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}},[t._v(t._s(t.person))]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v("选择人员")])],1)]),s("div",{staticClass:"item has-two"},[t._m(0),s("div",{staticClass:"item-content"},[s("el-select",{attrs:{placeholder:"请选择工单类型"},on:{change:t.selectType},model:{value:t.orderType,callback:function(e){t.orderType=e},expression:"orderType"}},t._l(t.orderTypeData,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("工单提交时间：")]),s("div",{staticClass:"item_content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"提交开始时间"},model:{value:t.submissionStartTime,callback:function(e){t.submissionStartTime=e},expression:"submissionStartTime"}}),s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"提交结束时间"},model:{value:t.submissionEndTime,callback:function(e){t.submissionEndTime=e},expression:"submissionEndTime"}})],1)]),s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("工单完成时间：")]),s("div",{staticClass:"item_content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"完成开始时间"},model:{value:t.completionStartTime,callback:function(e){t.completionStartTime=e},expression:"completionStartTime"}}),s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"完成结束时间"},model:{value:t.completionEndTime,callback:function(e){t.completionEndTime=e},expression:"completionEndTime"}})],1)])]),s("div",{staticClass:"button-group-box"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.search}},[t._v("搜索")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.clearSearch}},[t._v("清空")])],1)]),s("div",{staticClass:"content-box"},[s("div",{staticClass:"table-box"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.orderList,stripe:!0,"tooltip-effect":"dark",border:"",height:"830"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),s("el-table-column",{attrs:{prop:"typeStr",label:"工单类型","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"person",label:"负责人","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"creationTime","min-width":"110",label:"工单提交时间",format:"yyyy-MM-dd HH:mm","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"completeTime","min-width":"110",label:"完成时间",format:"yyyy-MM-dd HH:mm","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"completeTime","min-width":"110",label:"预计完成时间",format:"yyyy-MM-dd HH:mm","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"statusStr",label:"工单状态","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operate-box"},[s("el-button",{class:["operate-button",1==e.row["status"]||2==e.row["status"]?"":"operate-button-active"],attrs:{type:"text",disabled:1==e.row["status"]||2==e.row["status"]?t.disabledFalse:t.disabledTrue},on:{click:function(s){return t.handleClose(e.row)}}},[t._v("关闭")]),s("el-button",{class:["operate-button",1==e.row["status"]?"":"operate-button-active"],attrs:{type:"text",disabled:1==e.row["status"]?t.disabledFalse:t.disabledTrue},on:{click:function(s){return t.handleEdit(e.row)}}},[t._v("修改")]),s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v("查看")])],1)]}}])})],1)],1),s("div",{staticClass:"page-box"},[s("page",{attrs:{"page-data":[30,40,50,100],total:t.orderListTotal},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":"single"},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("add-order",{attrs:{"dialog-add":t.dialogAdd},on:{closeAdd:t.closeAdd,getAdd:t.getAdd}}),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("operate",{attrs:{"dialog-operate":t.dialogOperate,"operate-type":t.operateType,message:t.messageT},on:{closeOperate:t.closeOperate,determine:t.determine}}),s("edit-order",{attrs:{"dialog-edit":t.dialogEdit},on:{closeEdit:t.closeEdit}}),s("order-detail",{attrs:{"dialog-view":t.dialogView},on:{closeView:t.closeView}}),s("close-order",{attrs:{"dialog-close":t.dialogClose,"order-id":t.checkedId},on:{closeOrder:t.closeOrder}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-title"},[s("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 工单类型： ")])}],o=(s("4160"),s("159b"),s("5530")),l=s("f5e4"),n=s("7a3b"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addOrder-box dialog-box"},[s("el-dialog",{attrs:{title:"新增工单",visible:t.dialogAdd,"before-close":t.closeAdd},on:{"update:visible":function(e){t.dialogAdd=e}}},[s("div",{staticClass:"content-box  form-box"},[s("div",{staticClass:"content_box"},[s("el-form",[s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("工单类型：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-select",{attrs:{placeholder:"请选择工单类型"},on:{change:t.selectType},model:{value:t.orderType,callback:function(e){t.orderType=e},expression:"orderType"}},t._l(t.orderTypeData,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("负责人：")])]),s("div",{staticClass:"content"},[""!=t.inCharge?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.inCharge,callback:function(e){t.inCharge=e},expression:"inCharge"}},[t._v(" "+t._s(t.inCharge)+" ")]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v(" 选择人员 ")])],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("预计完成时间：")])]),s("div",{staticClass:"content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计完成时间"},model:{value:t.completionTime,callback:function(e){t.completionTime=e},expression:"completionTime"}})],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("工单内容：")])]),s("div",{staticClass:"conten"},[s("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("巡检片区：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[""!=t.areaInfo.id?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.areaInfo.name,callback:function(e){t.$set(t.areaInfo,"name",e)},expression:"areaInfo.name"}},[t._v(" "+t._s(t.areaInfo.name)+" ")]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.chooseArea}},[t._v(" 选择片区 ")])],1)])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("附件上传：")])]),s("div",{staticClass:"conten"},[s("upload",{ref:"upload",on:{showPreview:t.showPreview}})],1)])])])],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeAdd}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determine}},[t._v("确 定")])],1)]),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":"single"},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("choose-area",{attrs:{"dialog-area":t.dialogArea,type:"choose"},on:{closeChooseArea:t.closeChooseArea,checkedArea:t.checkedArea}}),s("preview",{attrs:{"dialog-preview":t.dialogPreview,"file-data":t.fileData},on:{closePreview:t.closePreview}}),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}})],1)},c=[],d=s("e966"),p=s("9f5d"),v=s("c77e"),m=s("6e6c"),u=s("2f62"),h=s("ed08"),g=Object(u["a"])("xunjianPublic"),f=g.mapActions,C=Object(u["a"])("workOrderManagement"),b=C.mapState,_=C.mapActions,y={name:"AddOrder",props:["dialogAdd"],components:{ChoosePeople:l["a"],ChooseArea:d["a"],Upload:p["a"],Preview:v["a"],Message:m["a"]},data:function(){return{dialogCharge:!1,orderType:"",inCharge:"",personInfo:"",remarks:"",dialogPreview:!1,fileData:"",dialogArea:!1,areaInfo:{areaPoint:"",id:"",name:"",pipelineLength:0,pointCount:0},dialogMessage:!1,pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},completionTime:"",devInfo:""}},computed:Object(o["a"])({},b(["orderTypeData","messageText"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},_(["setMessage","InsertWorkOrder"])),f(["getOrganizationData","getRoleData","getAreaLists"])),{},{closeAdd:function(){console.log("点击了取消");var t={dialogAdd:!1};this.$emit("closeAdd",t)},choosePerson:function(){this.getOrganizationData(),this.getRoleData(),this.dialogCharge=!0},chooseArea:function(){var t={pageIndex:1,maxResultCount:30};console.log(t),this.getAreaLists(t),this.dialogArea=!0},closeChoosePeople:function(t){this.dialogCharge=t.dialogCharge},checkedPerson:function(t){this.dialogCharge=t.dialogCharge,this.inCharge=t.personinfo[0].trueName,this.personInfo=t.personinfo},showPreview:function(t){this.dialogPreview=t.flag,this.fileData=t.data},closePreview:function(t){this.dialogPreview=t},selectType:function(t){this.orderType=t},closeChooseArea:function(t){this.dialogArea=t.dialogArea},checkedArea:function(t){console.log(t),this.dialogArea=t.dialogArea,this.areaInfo=t.areaInfo,"single"==t.typestr&&(this.devInfo=t.devInfo)},closeMessage:function(t){this.dialogMessage=t},determine:function(){var t=this;if(console.log(this.completionTime),console.log(this.$refs.upload.fileListData),""==this.orderType)return this.setMessage("请选择工单类型"),void(this.dialogMessage=!0);if(""==this.inCharge)return this.setMessage("请选择负责人"),void(this.dialogMessage=!0);if(""==this.remarks)return this.setMessage("请输入工单内容"),void(this.dialogMessage=!0);if(""==this.areaInfo.id)return this.setMessage("请选择巡检片区"),void(this.dialogMessage=!0);if(""!=this.completionTime){this.completionTime=Object(h["g"])(this.completionTime,"{y}-{m}-{d} {h}:{i}");var e=Object(h["g"])(new Date,"{y}-{m}-{d} {h}:{i}");if(!Object(h["e"])(e,this.completionTime))return this.setMessage("预计完成时间不能小于当前时间"),void(this.dialogMessage=!0)}var s={personId:this.personInfo.id,person:this.inCharge,type:this.orderType,status:1,planCompleteTime:this.completionTime,areaId:this.areaInfo.id,content:this.remarks,source:1,resourceInfoList:this.$refs.upload.fileListData,deviceId:this.devInfo.id};console.log(s),this.InsertWorkOrder(s).then((function(e){if(e.success){var s=!1;t.$emit("getAdd",s)}})).catch((function(){t.dialogMessage=!0;var e={dialogAdd:!1};t.$emit("closeAdd",e)}))}})},k=y,w=(s("2228"),s("2877")),D=Object(w["a"])(k,r,c,!1,null,"29e1f878",null),x=D.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box"},[s("div",{staticClass:"dialog-box dialog_box button-box"},[s("el-dialog",{attrs:{title:"修改工单",visible:t.dialogEdit,"before-close":t.closeEdit},on:{"update:visible":function(e){t.dialogEdit=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"content_box select_box"},[s("el-form",[s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("工单类型：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-select",{attrs:{placeholder:"请选择工单类型"},on:{change:t.selectType},model:{value:t.orderDetails.type,callback:function(e){t.$set(t.orderDetails,"type",e)},expression:"orderDetails.type"}},t._l(t.orderTypeData,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("负责人：")])]),s("div",{staticClass:"content"},[""!=t.orderDetails.person?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.orderDetails.person,callback:function(e){t.$set(t.orderDetails,"person",e)},expression:"orderDetails.person"}},[t._v(" "+t._s(t.orderDetails.person)+" ")]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v(" 选择人员 ")])],1)])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("巡检片区：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[""!=t.orderDetails.person?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.orderDetails.person,callback:function(e){t.$set(t.orderDetails,"person",e)},expression:"orderDetails.person"}},[t._v(" "+t._s(t.orderDetails.areaId)+" ")]):t._e()],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("预计完成时间：")])]),s("div",{staticClass:"content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计完成时间"},model:{value:t.orderDetails.planCompleteTime,callback:function(e){t.$set(t.orderDetails,"planCompleteTime",e)},expression:"orderDetails.planCompleteTime"}})],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("工单内容：")])]),s("div",{staticClass:"conten"},[s("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.orderDetails.content,callback:function(e){t.$set(t.orderDetails,"content",e)},expression:"orderDetails.content"}})],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("附件上传：")])]),s("div",{staticClass:"conten"},[s("upload",{ref:"upload",on:{showPreview:t.showPreview}})],1)])])]),null!=t.orderDetails.eventDetails?s("div",{staticClass:"list-box"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备名称：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.deviceName))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备编号：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.deviceCode))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点坐标：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.devicePoint))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("地址：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.address))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.deviceStatusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("异常类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.errorType))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.typeStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件提交时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.creationTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("报告人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.creationName))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("联系方式：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.phone))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.statusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("提交工单时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.creationTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("巡检内容：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetails.eventDetails.content))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("附件：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"enclosure-box"},t._l(t.orderDetails.resourcelist,(function(e,i){return s("div",{key:i,staticClass:"enclosure-item"},[s("div",{staticClass:"enclosure-title"},[t._v(t._s(e.fileName))]),s("div",{staticClass:"enclosure-download"},[t._v("下载")]),s("div",{staticClass:"enclosure-preview"},[t._v("预览")])])})),0)])])])]):t._e()],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeEdit}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determine}},[t._v("确 定")])],1)])],1),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("preview",{attrs:{"dialog-preview":t.dialogPreview,"file-data":t.fileData},on:{closePreview:t.closePreview}}),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}})],1)},T=[],M=Object(u["a"])("workOrderManagement"),S=M.mapState,I=M.mapActions,P={name:"EditOrder",props:["dialogEdit"],components:{ChoosePeople:l["a"],Upload:p["a"],Preview:v["a"],Message:m["a"]},computed:Object(o["a"])({},S(["orderTypeData","orderDetails","messageText"])),data:function(){return{dialogCharge:!1,dialogPreview:!1,orderType:"",fileData:"",pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},dialogMessage:!1,personInfo:""}},methods:Object(o["a"])(Object(o["a"])({},I(["setMessage"])),{},{closeEdit:function(){console.log("点击了取消");var t={dialogEdit:!1,data:[]};this.$emit("closeEdit",t)},choosePerson:function(){this.dialogCharge=!0},closeChoosePeople:function(t){console.log(t),this.dialogCharge=t.dialogCharge},checkedPerson:function(t){console.log(t),this.dialogCharge=t.dialogCharge,this.orderDetails.person=t.personinfo[0].trueName,this.personInfo=t.personinfo},showPreview:function(t){this.dialogPreview=t.flag,this.fileData=t.data},closePreview:function(t){this.dialogPreview=t},closeMessage:function(t){this.dialogMessage=t},selectType:function(t){this.orderDetails.type=t,console.log(this.orderDetails.type)},determine:function(){if(""==this.orderDetails.type)return this.setMessage("请选择工单类型"),void(this.dialogMessage=!0);if(""==this.orderDetails.person)return this.setMessage("负责人不能为空"),void(this.dialogMessage=!0);if(""==this.orderDetails.content)return this.setMessage("工单类容不能为空"),void(this.dialogMessage=!0);if(""!=this.orderDetails.planCompleteTime){this.orderDetails.planCompleteTime=Object(h["g"])(this.orderDetails.planCompleteTime,"{y}-{m}-{d} {h}:{i}");var t=Object(h["g"])(new Date,"{y}-{m}-{d} {h}:{i}");if(!Object(h["e"])(t,this.orderDetails.planCompleteTime))return this.setMessage("预计完成时间不能小于当前时间"),void(this.dialogMessage=!0)}}})},A=P,j=(s("15f8"),Object(w["a"])(A,O,T,!1,null,"4be2cf90",null)),E=j.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"事件详情",visible:t.dialogView,"before-close":t.closeView},on:{"update:visible":function(e){t.dialogView=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"list-box"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("工单类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.typeStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("负责人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.person))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("工单状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.statusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("工单提交时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.creationTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("完成时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.completeTime))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("预计完成时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.planCompleteTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("工单内容：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.orderDetail.content))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("附件：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"enclosure-box"},t._l(t.orderDetail.resourcelist,(function(e,i){return s("div",{key:i,staticClass:"enclosure-item"},[s("div",{staticClass:"enclosure-title"},[t._v(t._s(e.fileName))]),s("div",{staticClass:"enclosure-download"},[t._v("下载")]),s("div",{staticClass:"enclosure-preview"},[t._v("预览")])])})),0)])])]),s("div",{staticClass:"workOrder-back-box"},[1==t.orderDetail.type||2==t.orderDetail.type?s("div",{staticClass:"workOrder-box"},[s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("查漏：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.leak,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber)+"1")]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("查漏延伸：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.leakExtension,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber))]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("查漏地点：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.address,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[t._v(" "+t._s(e.value)+" ")])})),0)])]):t._e(),3==t.orderDetail.type||4==t.orderDetail.type||6==t.orderDetail.type?s("div",{staticClass:"workOrder-box"},[s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("维修：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.repair,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber))]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("改管：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.change,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber))]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("阀门：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.valve,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber))]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("消防栓：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.fireHydrant,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[s("span",{staticClass:"koujing"},[t._v("DN"+t._s(e.caliber))]),s("span",{staticClass:"zhi"},[t._v(t._s(e.value)+"m")])])})),0)]),s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("贫水区改造地点：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.address,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[t._v(" "+t._s(e.value)+" ")])})),0)])]):t._e(),5==t.orderDetail.type?s("div",{staticClass:"workOrder-box"},[s("div",{staticClass:"back-box"},[s("div",{staticClass:"back-title"},[t._v("违章单位：")]),s("div",{staticClass:"back-content"},t._l(t.orderDetail.workOrderBacks.company,(function(e,i){return s("div",{key:i,staticClass:"back-item"},[t._v(" "+t._s(e.value)+" ")])})),0)])]):t._e()])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeView}},[t._v("返 回")])],1)])],1)},L=[],z=Object(u["a"])("workOrderManagement"),R=z.mapState,N={name:"OrderDetail",props:["dialogView"],computed:Object(o["a"])({},R(["orderDetail"])),methods:{closeView:function(){var t=!1;this.$emit("closeView",t)}}},H=N,V=(s("8018"),Object(w["a"])(H,$,L,!1,null,"27ce6e04",null)),W=V.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"closeOrder-box"},[s("div",{staticClass:"dialog-box dialog_box button-box"},[s("el-dialog",{attrs:{title:"关闭工单",visible:t.dialogClose,"before-close":t.closeOrder},on:{"update:visible":function(e){t.dialogClose=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"content_box"},[s("div",{staticClass:"left"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("关闭原因：")])]),s("div",{staticClass:"right"},[s("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeOrder}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determine}},[t._v("确 定")])],1)])],1),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}})],1)},G=[],q=Object(u["a"])("workOrderManagement"),F=q.mapState,U=q.mapActions,J={name:"CloseOrder",props:["dialogClose","orderId"],components:{Message:m["a"]},data:function(){return{reason:"",dialogMessage:!1}},computed:Object(o["a"])({},F(["messageText"])),methods:Object(o["a"])(Object(o["a"])({},U(["setMessage","closeOrder"])),{},{closeOrder:function(){var t=!1;this.$emit("closeOrder",t)},determine:function(){var t=this;if(console.log("点击了确定"),""==this.reason)return this.setMessage("原因不能为空！"),void(this.dialogMessage=!0);var e={Id:this.orderId,closeReason:this.reason};this.closeOrder(e).catch((function(){t.dialogMessage=!0}));var s=!1;this.$emit("closeOrder",s)},closeMessage:function(t){this.dialogMessage=t}})},K=J,Q=(s("5e0d"),Object(w["a"])(K,B,G,!1,null,"451167c1",null)),X=Q.exports,Y=s("2f15"),Z=Object(u["a"])("workOrderManagement"),tt=Z.mapState,et=Z.mapActions,st=Object(u["a"])("xunjianPublic"),it=st.mapActions,at={name:"workOrder",components:{ChoosePeople:l["a"],Page:n["a"],AddOrder:x,EditOrder:E,OrderDetail:W,CloseOrder:X,Message:m["a"],Operate:Y["a"]},data:function(){return{currentIndex:0,statusList:["全部","待接收","进行中","已关闭","已完成"],disabledTrue:!0,disabledFalse:!1,screen:"筛选",isScreen:!1,dialogCharge:!1,person:"",personInfo:"",orderType:"",submissionStartTime:"",submissionEndTime:"",completionStartTime:"",completionEndTime:"",dialogEdit:!1,dialogView:!1,dialogAdd:!1,currentPage:1,pagesize:30,dialogMessage:!1,dialogOperate:!1,dialogClose:!1,operateType:"",messageT:"请确认操作",multipleSelection:[],checkedId:""}},computed:Object(o["a"])({},tt(["orderTypeData","orderList","orderListTotal","messageText"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},et(["GetWorkOrderList","GetWorkOrderDetails","DeleteWorkOrder","setMessage"])),it(["getOrganizationData","getRoleData"])),{},{searchConditional:function(t){this.currentIndex=t;var e={pageIndex:1,MaxResultCount:30,status:this.currentIndex};this.GetWorkOrderList(e)},showScreen:function(){this.isScreen=!this.isScreen,this.isScreen?this.screen="收起":this.screen="筛选"},addOrder:function(){this.dialogAdd=!0},onlyOne:function(){return 0==this.multipleSelection.length?(this.setMessage("请选择要操作数据"),this.dialogMessage=!0,!1):!(this.multipleSelection.length>1)||(this.setMessage("只能选择一行数据"),this.dialogMessage=!0,!1)},closeOrder:function(t){this.dialogClose=t},close:function(){this.onlyOne()&&(1==this.multipleSelection[0].status||2==this.multipleSelection[0].status?(this.dialogClose=!0,this.checkedId=this.multipleSelection[0].id):(this.setMessage("该状态不能关闭"),this.dialogMessage=!0))},handleClose:function(t){this.checkedId=t.id,this.dialogClose=!0},modify:function(){var t=this;if(this.onlyOne())if(1==this.multipleSelection[0].status){var e={Id:this.multipleSelection[0].id};this.GetWorkOrderDetails(e).then((function(e){e.success&&(t.dialogEdit=!0)})).catch((function(){t.dialogMessage=!0}))}else this.setMessage("该状态不能修改"),this.dialogMessage=!0},handleEdit:function(t){var e=this,s={Id:t.id};this.GetWorkOrderDetails(s).then((function(t){t.success&&(e.dialogEdit=!0)})).catch((function(){e.dialogMessage=!0}))},See:function(){var t=this;if(this.onlyOne()){var e={Id:this.multipleSelection[0].id};this.GetWorkOrderDetails(e).then((function(e){e.success&&(t.dialogView=!0)})).catch((function(){t.dialogMessage=!0}))}},handleSee:function(t){var e=this,s={Id:t.id};this.GetWorkOrderDetails(s).then((function(t){t.success&&(e.dialogView=!0)})).catch((function(){e.dialogMessage=!0}))},del:function(){var t=this;if(0==this.multipleSelection.length)this.setMessage("请选择要操作数据"),this.dialogMessage=!0;else{var e=!1;this.multipleSelection.forEach((function(s){3==s.status?e=!0:(e=!1,t.setMessage("只允许删除已暂停和已关闭的任务"),t.dialogMessage=!0)})),e&&(this.messageT="确定删除吗？",this.operateType="del",this.dialogOperate=!0)}},closeMessage:function(t){this.dialogMessage=t},closeOperate:function(t){this.dialogOperate=t},determine:function(t){var e,s=this;console.log(t),this.dialogOperate=t.flag,"del"==t.type&&this.multipleSelection.forEach((function(t){e={id:t.id},s.DeleteWorkOrder(e)}))},choosePerson:function(){this.dialogCharge=!0,this.getOrganizationData(),this.getRoleData()},closeChoosePeople:function(t){console.log(t),this.dialogCharge=t.dialogCharge},checkedPerson:function(t){this.dialogCharge=t.dialogCharge,this.person=t.personinfo[0].trueName,this.personInfo=t.personinfo},selectType:function(t){this.orderType=t},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},changePageSize:function(t){this.pagesize=t,this.getData()},changeCurrentPage:function(t){this.currentPage=t,this.getData()},closeEdit:function(t){console.log(t),this.dialogEdit=t.dialogEdit},closeView:function(t){this.dialogView=t},closeAdd:function(t){this.dialogAdd=t.dialogAdd},getAdd:function(t){this.dialogAdd=t,this.getData()},getData:function(){var t=this,e={status:this.currentIndex,pageIndex:this.currentPage,MaxResultCount:this.pagesize};this.GetWorkOrderList(e).catch((function(){t.dialogMessage=!0}))},search:function(){var t=this;console.log(this.submissionEndTime);var e="",s="",i="",a="";if(""!=this.orderType)if(""!=this.submissionStartTime&&""!=this.submissionEndTime||""==this.submissionStartTime&&""==this.submissionEndTime)if(""!=this.submissionStartTime&&(e=Object(h["g"])(this.submissionStartTime,"{y}-{m}-{d} {h}:{i}"),s=Object(h["g"])(this.submissionEndTime,"{y}-{m}-{d} {h}:{i}")),""!=this.completionStartTime&&""!=this.completionEndTime||""==this.completionStartTime&&""==this.completionEndTime){""!=this.completionStartTime&&(i=Object(h["g"])(this.completionStartTime,"{y}-{m}-{d} {h}:{i}"),a=Object(h["g"])(this.completionEndTime,"{y}-{m}-{d} {h}:{i}"));var o={pageIndex:this.currentPage,MaxResultCount:this.pagesize,person:this.person,beginCreationTime:e,endCreationTime:s,beginCompleteTime:i,endCompleteTime:a,type:this.orderType};this.GetWorkOrderList(o).catch((function(){t.dialogMessage=!0})),this.clearSearch()}else""==this.completionStartTime?(this.setMessage("请选择工单完成的开始时间"),this.dialogMessage=!0):""==this.completionEndTime&&(this.setMessage("请选择工单完成的结束时间"),this.dialogMessage=!0);else""==this.submissionStartTime?(this.setMessage("请选择工单提交的开始时间"),this.dialogMessage=!0):""==this.submissionEndTime&&(this.setMessage("请选择工单提交的结束时间"),this.dialogMessage=!0)},clearSearch:function(){this.person="",this.submissionStartTime="",this.submissionEndTime="",this.completionStartTime="",this.completionEndTime="",this.orderType="",this.isScreen=!this.isScreen,this.screen="筛选"},exportData:function(){var t,e=["人员姓名","所属部门","联系方式","今日上线时间","今日离线时间"],s=["userName","orgName","mobile","onlineTime","offlineTime"],i="人员列表";t=0==this.multipleSelection.length?this.orderList:this.multipleSelection,Object(h["b"])(e,s,t,i)}}),mounted:function(){this.getData()}},ot=at,lt=(s("e2c2"),Object(w["a"])(ot,i,a,!1,null,"30d8ef20",null));e["default"]=lt.exports},"15f8":function(t,e,s){"use strict";var i=s("ba07"),a=s.n(i);a.a},2228:function(t,e,s){"use strict";var i=s("ebe9"),a=s.n(i);a.a},"2d30":function(t,e,s){},"2f84":function(t,e,s){"use strict";var i=s("c90e"),a=s.n(i);a.a},"5e0d":function(t,e,s){"use strict";var i=s("acc2"),a=s.n(i);a.a},8018:function(t,e,s){"use strict";var i=s("9a22"),a=s.n(i);a.a},"9a22":function(t,e,s){},"9f5d":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-box"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,multiple:t.multiple,limit:t.limit,"show-file-list":t.showList,"on-success":t.handleSuccess,"on-err":t.handleError}},[s("el-button",{attrs:{size:"small",type:"primary"}},[s("i",{staticClass:"el-icon-plus icon-text"}),t._v(" 点击上传 ")])],1),0!=t.fileListData.length?s("div",{staticClass:"list-box"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileListData}},[s("el-table-column",{attrs:{prop:"fileName",label:"文件名"}}),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.showPreview(e.row)}}},[t._v("预览")]),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.download(e.row)}}},[t._v("下载")]),s("el-button",{attrs:{type:"primary"}},[t._v("删除")])]}}],null,!1,2637127182)})],1)],1):t._e()],1)},a=[],o=(s("4160"),s("159b"),s("5530")),l=s("2f62"),n=Object(l["a"])("upload"),r=n.mapState,c=n.mapActions,d={name:"upload",data:function(){return{showList:!1,multiple:!0,limit:3,listData:[]}},computed:Object(o["a"])({},r(["fileListData","actionUrl"])),methods:Object(o["a"])(Object(o["a"])({},c(["setFileListData","downloadFile"])),{},{handleSuccess:function(t){var e=this;t.result.items.forEach((function(t){e.listData.push(t)})),this.setFileListData(this.listData)},handleError:function(t,e,s){this.$message.warning("上传失败，请重新上传！"),console.log(t),console.log(e),console.log(s)},showPreview:function(t){console.log(t);var e={flag:!0,data:t};this.$emit("showPreview",e)},download:function(t){var e={fileName:t.url,downLoadName:t.fileName};this.downloadFile(e)}})},p=d,v=(s("a909"),s("2877")),m=Object(v["a"])(p,i,a,!1,null,"6e725174",null);e["a"]=m.exports},a334:function(t,e,s){},a909:function(t,e,s){"use strict";var i=s("a334"),a=s.n(i);a.a},acc2:function(t,e,s){},ad0f:function(t,e,s){},b7c4:function(t,e,s){"use strict";var i=s("2d30"),a=s.n(i);a.a},ba07:function(t,e,s){},c77e:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-box"},[s("el-dialog",{attrs:{title:"附件预览",visible:t.dialogPreview},on:{"update:visible":function(e){t.dialogPreview=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"cancel-box",on:{click:t.closePreview}},[s("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]),s("div",{staticClass:"content_box"},[s("img",{staticClass:"img",attrs:{src:t.httpUrl+t.fileData.url,alt:""}})])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closePreview}},[t._v("取 消")])],1)])],1)},a=[],o=s("5530"),l=s("2f62"),n=Object(l["a"])("upload"),r=n.mapState,c={name:"Preview",props:["dialogPreview","fileData"],computed:Object(o["a"])({},r(["httpUrl"])),methods:{closePreview:function(){var t=!1;this.$emit("closePreview",t)}}},d=c,p=(s("b7c4"),s("2877")),v=Object(p["a"])(d,i,a,!1,null,"e986758a",null);e["a"]=v.exports},c90e:function(t,e,s){},e2c2:function(t,e,s){"use strict";var i=s("ad0f"),a=s.n(i);a.a},e966:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"choosePeople-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"选择路线",visible:t.dialogArea,"before-close":t.closeChooseArea},on:{"update:visible":function(e){t.dialogArea=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"content_box"},[s("div",{staticClass:"table-box"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.areaList,stripe:!0,"tooltip-effect":"dark",height:"400","highlight-current-row":!0},on:{"row-click":t.clickRow}},[s("el-table-column",{attrs:{align:"center",prop:"name",label:"片区名称"}}),s("el-table-column",{attrs:{align:"center",prop:"pipelineLength",label:"管道长度"}}),s("el-table-column",{attrs:{align:"center",prop:"pointCount",label:"设备点数量"}}),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["view"==t.type?s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v("查看")]):t._e(),"choose"==t.type?s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleChoose(e.row)}}},[t._v("选择设备")]):t._e()]}}])})],1)],1),s("page",{attrs:{"page-data":[30,40,50,100],total:t.areaTotal},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeChooseArea}},[t._v("返回")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determine}},[t._v("确 定")])],1)]),s("view-route",{attrs:{"dialog-route":t.dialogRoute,typestr:t.typeStr,"type-Str":t.choosetype},on:{getRouteData:t.getRouteData}})],1)},a=[],o=s("5530"),l=s("7a3b"),n=s("597c"),r=s("2f62"),c=Object(r["a"])("xunjianPublic"),d=c.mapState,p=Object(r["a"])("area"),v=p.mapActions,m={name:"ChooseArea",props:{dialogArea:{type:Boolean,default:!1},type:{type:String,default:"view"},choosetype:{type:String,default:"single"}},components:{Page:l["a"],ViewRoute:n["a"]},data:function(){return{searchWords:"",areaInfo:"",dialogRoute:!1,typeStr:"",equiInfo:[],conInfo:[],devInfo:""}},computed:Object(o["a"])({},d(["areaList","areaTotal"])),methods:Object(o["a"])(Object(o["a"])({},v(["getAreaDetailInfo"])),{},{closeChooseArea:function(){var t={dialogArea:!1};this.$emit("closeChooseArea",t)},clickRow:function(t){this.areaInfo=t,this.equiInfo="",this.conInfo="",this.devInfo=""},determine:function(){if("choose"==this.type){if(""==this.areaInfo)return void alert("请选择巡检片区！");if("single"==this.choosetype){if(""==this.devInfo)return void alert("请选择设备或管道！");var t={dialogArea:!1,type:"choose",typestr:"single",areaInfo:this.areaInfo,devInfo:this.devInfo};this.$emit("checkedArea",t)}else if("multiple"==this.choosetype){if(""==this.conInfo||""==this.equiInfo)return void alert("请选择巡检片区！");var e={areaInfo:this.areaInfo,equiInfo:this.equiInfo,conInfo:this.conInfo,dialogArea:!1,type:"choose",typestr:"multiple"};this.$emit("checkedArea",e)}}else if("view"==this.type){if(""==this.areaInfo)return void alert("请选择巡检片区！");var s={areaInfo:this.areaInfo,dialogArea:!1,type:"view"};this.$emit("checkedArea",s)}},changePageSize:function(t){console.log(t)},changeCurrentPage:function(t){console.log(t)},handleSee:function(t){console.log(t);var e={Id:t.id};this.getAreaDetailInfo(e),this.typeStr="view",this.dialogRoute=!0},handleChoose:function(t){var e={Id:t.id};this.getAreaDetailInfo(e),this.typeStr="choose",this.dialogRoute=!0},getRouteData:function(t){console.log(t),this.dialogRoute=t.dialogRoute,"choose"==this.typeStr&&("single"==t.type?this.devInfo=t.devInfo:"multiple"==t.type&&(this.equiInfo=t.equiInfo,this.conInfo=t.conInfo))}}),mounted:function(){}},u=m,h=(s("2f84"),s("2877")),g=Object(h["a"])(u,i,a,!1,null,"1d646d03",null);e["a"]=g.exports},ebe9:function(t,e,s){}}]);
//# sourceMappingURL=chunk-2bb21358.5481350c.js.map