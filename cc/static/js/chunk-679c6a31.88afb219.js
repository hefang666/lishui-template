(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-679c6a31"],{"08c4":function(t,e,s){},"2f84":function(t,e,s){"use strict";var a=s("c90e"),i=s.n(a);i.a},"398b":function(t,e,s){"use strict";var a=s("c5be"),i=s.n(a);i.a},"9e82":function(t,e,s){},b649:function(t,e,s){},ba3b:function(t,e,s){"use strict";var a=s("08c4"),i=s.n(a);i.a},bca0:function(t,e,s){"use strict";var a=s("9e82"),i=s.n(a);i.a},c458:function(t,e,s){},c5be:function(t,e,s){},c90e:function(t,e,s){},d7fc:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task_management_pages button-box"},[s("div",{staticClass:"header-box"},[s("div",{staticClass:"header-left"},[s("el-button-group",t._l(t.statusList,(function(e,a){return s("el-button",{key:a,class:{"item-active":a==t.currentState},attrs:{type:"primary",plain:""},on:{click:function(e){return t.searchConditional(a)}}},[t._v(" "+t._s(e)+" ")])})),1),s("el-button",{staticClass:"screen-button",attrs:{type:"primary",plain:""},on:{click:t.showScreen}},[t._v(" "+t._s(t.screen)+" ")])],1),s("div",{staticClass:"header-right"},[s("el-button-group",[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addTask}},[t._v("新增")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.restart}},[t._v("重启")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.del}},[t._v("删除")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.suspend}},[t._v("暂停")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.close}},[t._v("关闭")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.complete}},[t._v("完成")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.modify}},[t._v("修改")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.See}},[t._v("查看")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.exportData}},[t._v("导出")])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isScreen,expression:"isScreen"}],staticClass:"screen-box select_box"},[s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("计划名称：")]),s("div",{staticClass:"item-content"},[s("el-input",{model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}})],1)])]),s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[t._m(0),s("div",{staticClass:"item-content"},[s("el-date-picker",{attrs:{type:"date",placeholder:"开始时间"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1)]),s("div",{staticClass:"item has-two"},[t._m(1),s("div",{staticClass:"item-content"},[s("el-date-picker",{attrs:{type:"date",placeholder:"结束时间"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)])]),s("div",{staticClass:"button-group-box"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.search}},[t._v("搜索")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.clearSearch}},[t._v("清空")])],1)]),s("div",{staticClass:"content-box"},[s("div",{staticClass:"table-box"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.taskList,stripe:!0,"tooltip-effect":"dark",height:"830",border:""},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),s("el-table-column",{attrs:{prop:"name",label:"任务名称","min-width":"120","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"typeStr",label:"任务类别",width:"120"}}),s("el-table-column",{attrs:{prop:"person",label:"负责人","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"participants",label:"参与人","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"planStartTime","min-width":"110",label:"预计开始时间","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"planEndTime","min-width":"110",label:"预计完成时间","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"endTime","min-width":"110",label:"实际完成时间","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"stopTime",label:"暂停时长","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"statusStr",label:"任务状态","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"操作",width:"165"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operate-box"},[s("el-button",{class:["operate-button",3!=e.row["status"]?"operate-button-active":""],attrs:{type:"text",disabled:3!=e.row["status"]?t.disabledTrue:t.disabledFalse},on:{click:function(s){return t.handleClose(e.row)}}},[t._v("关闭")]),s("el-button",{class:["operate-button",2==e.row["status"]||4==e.row["status"]?"":"operate-button-active"],attrs:{type:"text",disabled:2==e.row["status"]||4==e.row["status"]?t.disabledTrue:t.disabledFalse},on:{click:function(s){return t.handleComplete(e.row)}}},[t._v("完成")]),s("el-button",{class:["operate-button",1==e.row["status"]||3==e.row["status"]?"":"operate-button-active"],attrs:{type:"text",disabled:1==e.row["status"]||3==e.row["status"]?t.disabledFalse:t.disabledTrue},on:{click:function(s){return t.handleEdit(e.row)}}},[t._v("修改")]),s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v("查看")])],1)]}}])})],1)],1),s("div",{staticClass:"page-box"},[s("page",{attrs:{"page-data":t.pageData,total:t.listTotalCount},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("operate",{attrs:{"dialog-operate":t.dialogOperate,"operate-type":t.operateType,message:t.messageT},on:{closeOperate:t.closeOperate,determine:t.determine}}),s("add-task",{attrs:{"dialog-add":t.dialogAdd},on:{closeAdd:t.closeAdd,getAddData:t.getAddData}}),s("view-task",{attrs:{"dialog-view":t.dialogView},on:{getViewData:t.getViewData}}),s("edit-task",{attrs:{"dialog-edit":t.dialogEdit},on:{closeEdit:t.closeEdit,getEditData:t.getEditData}})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-title"},[s("span",{staticClass:"tips"},[t._v("*")]),t._v(" 计划开始时间： ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-title"},[s("span",{staticClass:"tips"},[t._v("*")]),t._v(" 计划结束时间： ")])}],o=(s("4160"),s("159b"),s("5530")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"新增任务",visible:t.dialogAdd,"before-close":t.closeAdd},on:{"update:visible":function(e){t.dialogAdd=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"content_box"},[s("div",[s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("任务名称：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-input",{attrs:{type:"taskName",autocomplete:"off"},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}})],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("负责人：")])]),s("div",{staticClass:"content"},[""!=t.inCharge?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.inCharge,callback:function(e){t.inCharge=e},expression:"inCharge"}},[t._v(t._s(t.inCharge))]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v("选择人员")])],1)])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("预计开始时间：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计任务开始时间"},model:{value:t.estimatedStartTime,callback:function(e){t.estimatedStartTime=e},expression:"estimatedStartTime"}})],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("预计结束时间：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计任务结束时间"},model:{value:t.estimatedEndTime,callback:function(e){t.estimatedEndTime=e},expression:"estimatedEndTime"}})],1)])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("任务类别：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-select",{attrs:{placeholder:"请选择任务类别"},on:{change:t.selectType},model:{value:t.taskType,callback:function(e){t.taskType=e},expression:"taskType"}},[s("el-option",{attrs:{label:"临时任务",value:"1"}})],1)],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("巡检片区：")])]),s("div",{staticClass:"content"},[""!=t.areaInfo.name?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.areaInfo.name,callback:function(e){t.$set(t.areaInfo,"name",e)},expression:"areaInfo.name"}},[t._v(" "+t._s(t.areaInfo.name)+" ")]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.chooseArea}},[t._v(" 选择片区 ")])],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("备注：")])]),s("div",{staticClass:"conten"},[s("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)])])])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("保 存")]),s("el-button",{on:{click:t.closeAdd}},[t._v("取 消")])],1)]),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":"single"},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("choose-area",{attrs:{"dialog-area":t.dialogArea,type:"view"},on:{closeChooseArea:t.closeChooseArea,checkedArea:t.checkedArea}})],1)},l=[],c=s("f5e4"),r=s("e966"),d=s("6e6c"),p=s("2f62"),m=s("ed08"),h=Object(p["a"])("xunjianPublic"),u=h.mapActions,v=Object(p["a"])("taskManagement"),g=v.mapState,f=v.mapActions,C={props:["dialogAdd"],components:{ChoosePeople:c["a"],ChooseArea:r["a"],Message:d["a"]},computed:Object(o["a"])({},g(["messageText"])),data:function(){return{taskName:"",inCharge:"",personId:"",estimatedStartTime:"",estimatedEndTime:"",taskType:"",taskTypeId:"",areaInfo:{areaPoint:"",id:"",name:"",pipelineLength:0,pointCount:0},remarks:"",dialogCharge:!1,dialogArea:!1,dialogMessage:!1,equiInfo:[],conInfo:[],pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()}}}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},u(["getOrganizationData","getRoleData","getAreaLists"])),f(["addTask","setMessage"])),{},{closeAdd:function(){var t=!1;console.log(t),this.$emit("closeAdd",t),this.clearData()},choosePerson:function(){this.dialogCharge=!0,this.getOrganizationData(),this.getRoleData()},closeChoosePeople:function(t){console.log(t),this.dialogCharge=t.dialogCharge},checkedPerson:function(t){console.log(t),this.dialogCharge=t.dialogCharge,this.inCharge=t.personinfo[0].trueName,this.personId=t.personinfo[0].id},add:function(){var t=this;if(""==this.taskName)return this.setMessage("任务名称不能为空"),void(this.dialogMessage=!0);if(""==this.personId)return this.setMessage("请选择负责人！"),void(this.dialogMessage=!0);if(""==this.estimatedStartTime)return this.setMessage("请选择任务开始时间"),void(this.dialogMessage=!0);if(this.estimatedStartTime=Object(m["g"])(this.estimatedStartTime,"{y}-{m}-{d} {h}:{i}"),""==this.estimatedEndTime)return this.setMessage("请选择任务结束时间"),void(this.dialogMessage=!0);this.estimatedEndTime=Object(m["g"])(this.estimatedEndTime,"{y}-{m}-{d} {h}:{i}");var e=new Date;if(e=Object(m["g"])(e,"{y}-{m}-{d} {h}:{i}"),!Object(m["e"])(e,this.estimatedStartTime))return this.setMessage("任务开始时间必须大于当前时间"),void(this.dialogMessage=!0);if(!Object(m["e"])(this.estimatedStartTime,this.estimatedEndTime))return this.setMessage("任务结束时间必须大于等于开始时间"),void(this.dialogMessage=!0);if(""==this.taskType)return this.setMessage("请选择任务类型"),void(this.dialogMessage=!0);if(""==this.areaInfo.id)return this.setMessage("请选择任务片区"),void(this.dialogMessage=!0);if(""==this.remarks)return this.setMessage("请输入任务备注"),void(this.dialogMessage=!0);var s={name:this.taskName,personId:this.personId,startTime:this.estimatedStartTime,endTime:this.estimatedEndTime,areaId:this.areaInfo.id,type:this.taskType,person:this.inCharge,remark:this.remarks};this.addTask(s).then((function(e){if(e.success){var s=!1;console.log(s),t.$emit("getAddData",s),t.clearData()}})).catch((function(){t.dialogMessage=!0}))},clearData:function(){this.taskName="",this.personId="",this.estimatedStartTime="",this.estimatedEndTime="",this.areaInfo={areaPoint:"",id:"",name:"",pipelineLength:0,pointCount:0},this.taskType="",this.inCharge="",this.remarks=""},chooseArea:function(){var t={pageIndex:1,maxResultCount:30};console.log(t),this.getAreaLists(t),this.dialogArea=!0},closeChooseArea:function(t){this.dialogArea=t.dialogArea},checkedArea:function(t){console.log(t),this.dialogArea=t.dialogArea,this.areaInfo=t.areaInfo,t.type},selectType:function(t){this.taskType=t},closeMessage:function(t){console.log(t),this.dialogMessage=t}})},b=C,k=(s("398b"),s("2877")),_=Object(k["a"])(b,n,l,!1,null,"7c4a3266",null),y=_.exports,T=s("7a3b"),D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"任务详情",visible:t.dialogView,"before-close":t.closeView},on:{"update:visible":function(e){t.dialogView=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"tabs-box"},[s("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"基础信息",name:"basicInfo"}},[s("div",{staticClass:"basicInfo-box"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("任务名称：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.name))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("任务负责人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.person))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("任务状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.statusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("参与人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.participant))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("任务类别：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.typeStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("预计结束时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.planEndTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("实际结束时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.endTime))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("开始时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.startTime))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("暂停时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.pauseTime))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("巡检片区：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.areaName))]),s("el-button",{staticClass:"view-button",on:{click:t.viewRoute}},[t._v("查看路线")])],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("备注：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.taskDetail.remark))])])])])])]),s("el-tab-pane",{attrs:{label:"设备点巡检信息",name:"equipmentInfo"}},[s("div",{staticClass:"equipmentInfo-box"},[s("div",{staticClass:"table-box"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.inspectionPointList,stripe:!0,"tooltip-effect":"dark",height:"400",border:"","highlight-current-row":!0}},[s("el-table-column",{attrs:{align:"center",prop:"name",label:"设备名称"}}),s("el-table-column",{attrs:{align:"center",prop:"code",label:"设备编号"}}),s("el-table-column",{attrs:{align:"center",prop:"statusStr",label:"设备点情况"}}),s("el-table-column",{attrs:{align:"center",prop:"inspectionStatusStr",label:"巡检状态"}}),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v("查看")])]}}])})],1)],1),s("page",{attrs:{"page-data":[30,40,50,100],total:400},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("el-tab-pane",{attrs:{label:"巡检路径",name:"inspectionPath"}},[s("div",{staticClass:"inspectionPath-box"},[s("div",{staticClass:"map-box"},[s("map-route",{ref:"map",attrs:{mapid:"ss_"+t.taskDetail.areaId}})],1),s("div",{staticClass:"inspectionPath-info-box button-box"},[s("div",{staticClass:"inspectionPath-info-item"},[s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 巡检路线： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" "+t._s(t.taskDetail.areaName)+" ")])]),s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 设备点数： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" "+t._s(t.areaDetail.pointCount)+" ")])]),s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 管道长度： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" "+t._s(t.areaDetail.pipelineLength)+" ")])])]),s("div",{staticClass:"inspectionPath-info-item"},[s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 规划路径： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[s("el-button",{attrs:{type:"primary",plain:""}},[t._v(" 显示 ")])],1)]),s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 预计里程： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" 1.95km ")])]),s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 预计花费时间： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" 0.10小时 ")])])]),s("div",{staticClass:"inspectionPath-info-item"},[s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 实际路径： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[s("el-button",{attrs:{type:"primary",plain:""}},[t._v(" 隐藏 ")])],1)]),s("div",{staticClass:"inspectionPath-info-items"},[s("div",{staticClass:"inspectionPath-info-item-title"},[t._v(" 实际花费时间： ")]),s("div",{staticClass:"inspectionPath-info-item-content"},[t._v(" 0.00小时 ")])])])])])])],1)],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeView}},[t._v("取 消")])],1)]),s("equipment-info",{attrs:{"dialog-equi":t.dialogEqui},on:{getEquiData:t.getEquiData}}),s("view-route",{attrs:{"dialog-route":t.dialogRoute},on:{getRouteData:t.getRouteData}})],1)},S=[],w=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"equipment-Information-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"设备点巡检任务详情",visible:t.dialogEqui,"before-close":t.closeEqui},on:{"update:visible":function(e){t.dialogEqui=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"equip-box"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备名称：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.name))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备编号：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.code))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点坐标：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.point))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点巡检时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.time))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("巡检状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.inspectionStatus))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.statusStr))])])])]),s("div",{class:["list-item",3==t.pointDetails.status?"has-two-item":""]},[3==t.pointDetails.status?s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("异常类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.errorType))])])]):t._e(),s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("地址：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.pointDetails.address))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("巡检内容：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"content-text"},[t._v(" "+t._s(t.pointDetails.content)+" ")])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("附件：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"enclosure-box"},t._l(t.pointDetails.resourcelist,(function(e,a){return s("div",{key:a,staticClass:"enclosure-item"},[s("div",{staticClass:"enclosure-title"},[t._v(t._s(e.fileName))]),s("div",{staticClass:"enclosure-download"},[t._v("下载")]),s("div",{staticClass:"enclosure-preview"},[t._v("预览")])])})),0)])])])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeEqui}},[t._v("取 消")])],1)])],1)}),x=[],M=Object(p["a"])("taskManagement"),P=M.mapState,I={name:"EquipmentInformation",props:["dialogEqui"],data:function(){return{}},computed:Object(o["a"])({},P(["pointDetails"])),methods:{closeEqui:function(){var t={dialogEqui:!1,data:[]};this.$emit("getEquiData",t)}}},E=I,O=(s("bca0"),Object(k["a"])(E,w,x,!1,null,"ead65528",null)),A=O.exports,j=s("597c"),q=s("2a59"),N=Object(p["a"])("taskManagement"),R=N.mapState,$=N.mapActions,L=Object(p["a"])("area"),V=L.mapActions,z={name:"AddTask",props:["dialogView"],components:{Page:T["a"],EquipmentInfo:A,ViewRoute:j["a"],MapRoute:q["a"]},data:function(){return{activeName:"basicInfo",checkedName:"",dialogEqui:!1,dialogRoute:!1}},computed:Object(o["a"])({},R(["taskDetail","inspectionPointList","areaDetail"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},$(["GetInspectionPointList","GetPointDetails","GetAreaByTaskId"])),V(["getAreaDetailInfo"])),{},{closeView:function(){var t={dialogView:!1,data:[]};this.$emit("getViewData",t)},viewRoute:function(){var t={Id:this.taskDetail.areaId};this.getAreaDetailInfo(t),this.dialogRoute=!0},handleClick:function(t,e){if(console.log(t,e),"equipmentInfo"==t.name){var s={Id:this.taskDetail.id,pageIndex:1,maxResultCount:30};this.GetInspectionPointList(s)}else if("inspectionPath"==t.name){var a={Id:this.taskDetail.id};this.GetAreaByTaskId(a)}},changePageSize:function(t){console.log(t)},changeCurrentPage:function(t){console.log(t)},handleSee:function(t){var e={id:t.id,status:t.status};this.GetPointDetails(e),this.dialogEqui=!0},getEquiData:function(t){this.dialogEqui=t.dialogEqui},getRouteData:function(t){this.dialogRoute=t.dialogRoute}})},G=z,U=(s("ba3b"),Object(k["a"])(G,D,S,!1,null,"57c2e523",null)),H=U.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"editTask-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"修改任务",visible:t.dialogEdit,"before-close":t.closeEdit},on:{"update:visible":function(e){t.dialogEdit=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"content_box"},[s("div",[s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("任务名称：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-input",{attrs:{type:"taskName",autocomplete:"off"},model:{value:t.taskDetails.name,callback:function(e){t.$set(t.taskDetails,"name",e)},expression:"taskDetails.name"}})],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("负责人：")])]),s("div",{staticClass:"content"},[""!=t.taskDetails.person?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.taskDetails.person,callback:function(e){t.$set(t.taskDetails,"person",e)},expression:"taskDetails.person"}},[t._v(t._s(t.taskDetails.person))]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v("选择人员")])],1)])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("任务状态：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[t._v(" "+t._s(t.taskDetails.statusStr)+" ")])])]),2==t.taskDetails.type?s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("参与人：")])]),s("div",{staticClass:"content"},[s("span",[t._v(t._s(t.taskDetails.participant))]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePart}},[t._v("选择人员")])],1)]):t._e()]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("任务类别：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[t._v(" "+t._s(t.taskDetails.typeStr)+" ")])])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("暂停时长：")])]),s("div",{staticClass:"content"},[t._v(" "+t._s(t.taskDetails.pauseTime)+" ")])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("预计开始时间：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计任务开始时间"},on:{change:t.editStartTime},model:{value:t.taskDetails.planStartTime,callback:function(e){t.$set(t.taskDetails,"planStartTime",e)},expression:"taskDetails.planStartTime"}})],1)])]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("预计结束时间：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","picker-options":t.pickerOptions,placeholder:"预计任务结束时间"},on:{change:t.editEndTime},model:{value:t.taskDetails.planEndTime,callback:function(e){t.$set(t.taskDetails,"planEndTime",e)},expression:"taskDetails.planEndTime"}})],1)])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("巡检片区：")])]),s("div",{staticClass:"content"},[t._v(" "+t._s(t.taskDetails.areaName)+" ")])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("备注：")])]),s("div",{staticClass:"conten"},[s("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.taskDetails.remark,callback:function(e){t.$set(t.taskDetails,"remark",e)},expression:"taskDetails.remark"}})],1)])])])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeEdit}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.Edit}},[t._v("保存")])],1)]),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":t.selectType},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}})],1)},B=[],J=Object(p["a"])("taskManagement"),W=J.mapState,K=J.mapActions,Q={name:"EditTask",props:["dialogEdit"],components:{ChoosePeople:c["a"],Message:d["a"]},data:function(){return{dialogCharge:!1,selectType:"",person:"",partData:[],dialogMessage:!1,pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()}}}},computed:Object(o["a"])({},W(["taskDetails","messageText"])),methods:Object(o["a"])(Object(o["a"])({},K(["UpdateTask","setMessage"])),{},{closeEdit:function(){var t=!1;this.$emit("closeEdit",t)},choosePerson:function(){this.selectType="single",this.dialogCharge=!0},choosePart:function(){this.selectType="multiple",this.dialogCharge=!0},closeChoosePeople:function(t){console.log(t),this.dialogCharge=t.dialogCharge},checkedPerson:function(t){var e=this;console.log(t),"single"==t.type?(this.person=t.personinfo,this.taskDetails.person=t.personinfo[0].trueName,this.taskDetails.personId=t.personinfo[0].id):"multiple"==t.type&&(this.partData=t.personinfo,this.taskDetails.participant=[],this.partData.forEach((function(t){e.taskDetails.participant.push(t.trueName)}))),this.dialogCharge=t.dialogCharge},editStartTime:function(t){this.taskDetails.planStartTime=Object(m["g"])(t,"{y}-{m}-{d} {h}:{i}")},editEndTime:function(t){this.taskDetails.planEndTime=Object(m["g"])(t,"{y}-{m}-{d} {h}:{i}")},closeMessage:function(t){this.dialogMessage=t},Edit:function(){if(""==this.taskDetails.planStartTime)return this.setMessage("开始时间不能为空"),void(this.dialogMessage=!0);if(""==this.taskDetails.planEndTime)return this.setMessage("结束时间不能为空"),void(this.dialogMessage=!0);var t=new Date;if(t=Object(m["g"])(t,"{y}-{m}-{d} {h}:{i}"),!Object(m["e"])(t,this.taskDetails.planStartTime))return this.setMessage("任务开始时间不能小于当前时间"),void(this.dialogMessage=!0);if(!Object(m["e"])(this.taskDetails.planStartTime,this.taskDetails.planEndTime))return this.setMessage("结束时间不能小于当前时间"),void(this.dialogMessage=!0);if(""==this.taskDetails.name)return this.setMessage("任务名称不能为空"),void(this.dialogMessage=!0);if(""==this.taskDetails.remark||null==this.taskDetails.remark)return this.setMessage("任务备注不能为空"),void(this.dialogMessage=!0);var e={Id:this.taskDetails.id,name:this.taskDetails.name,personId:this.taskDetails.personId,person:this.taskDetails.person,startTime:this.taskDetails.planStartTime,endTime:this.taskDetails.planEndTime,remark:this.taskDetails.remark};this.UpdateTask(e);var s=!1;this.$emit("getEditData",s)}})},X=Q,Y=(s("de84"),Object(k["a"])(X,F,B,!1,null,"5cbbf60c",null)),Z=Y.exports,tt=s("2f15"),et=Object(p["a"])("taskManagement"),st=et.mapState,at=et.mapActions,it={name:"TaskManagement",components:{AddTask:y,Page:T["a"],ViewTask:H,EditTask:Z,Message:d["a"],Operate:tt["a"]},computed:Object(o["a"])({},st(["taskList","listTotalCount","messageText","pageData","loading"])),data:function(){return{screen:"筛选",disabledTrue:!0,disabledFalse:!1,isScreen:!1,multipleSelection:[],currentPage:1,pageSize:1,dialogAdd:!1,dialogView:!1,dialogEdit:!1,searchName:"all",currentState:0,statusList:["全部","待接收","进行中","已暂停","已超期","已关闭","已完成"],taskName:"",startTime:"",endTime:"",dialogMessage:!1,dialogOperate:!1,operateType:"",messageT:"请确认操作"}},methods:Object(o["a"])(Object(o["a"])({},at(["getTaskList","searchTask","GetTaskDetails","deleteTask","UpdateTaskStatus","setMessage"])),{},{handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},onlyOne:function(){return 0==this.multipleSelection.length?(this.setMessage("请选择要操作数据"),this.dialogMessage=!0,!1):!(this.multipleSelection.length>1)||(this.setMessage("只能选择一行数据"),this.dialogMessage=!0,!1)},restart:function(){console.log(this.onlyOne()),this.onlyOne()&&(3==this.multipleSelection[0].status?(this.messageT="请确认操作",this.operateType="restart",this.dialogOperate=!0):(this.setMessage("该状态不能重启"),this.dialogMessage=!0))},del:function(){var t=this;if(0==this.multipleSelection.length)this.setMessage("请选择要操作数据"),this.dialogMessage=!0;else{var e=!1;this.multipleSelection.forEach((function(s){3==s.status||5==s.status?e=!0:(e=!1,t.setMessage("只允许删除已暂停和已关闭的任务"),t.dialogMessage=!0)})),e&&(this.messageT="确定删除吗？",this.operateType="del",this.dialogOperate=!0)}},suspend:function(){this.onlyOne()&&(2!=this.multipleSelection[0].status?(this.setMessage("该状态不能暂停"),this.dialogMessage=!0):(this.messageT="请确认操作",this.operateType="suspend",this.dialogOperate=!0))},close:function(){this.onlyOne()&&(3!=this.multipleSelection[0].statusList?(this.setMessage("该状态不能关闭"),this.dialogMessage=!0):(this.messageT="请确认操作",this.operateType="close",this.dialogOperate=!0))},handleClose:function(t){var e={Id:t.id,operate:4};this.UpdateTaskStatus(e)},complete:function(){this.onlyOne()&&(2==this.multipleSelection[0].status||4==this.multipleSelection[0].status?(this.messageT="请确认操作",this.operateType="complete",this.dialogOperate=!0):(this.setMessage("该状态不能完成"),this.dialogMessage=!0))},handleComplete:function(t){var e=this,s={Id:t.id,operate:2};this.UpdateTaskStatus(s).then((function(t){t.success&&(e.dialogMessage=!0)})).catch((function(){e.dialogMessage=!0}))},modify:function(){var t=this;if(this.onlyOne())if(1==this.multipleSelection[0].status||3==this.multipleSelection[0].status){var e={Id:this.multipleSelection[0].id};this.GetTaskDetails(e).then((function(e){e.success&&(t.dialogEdit=!0)})).catch((function(){t.dialogMessage=!0}))}else this.setMessage("该状态不能修改"),this.dialogMessage=!0},handleEdit:function(t){var e=this,s={Id:t.id};this.GetTaskDetails(s).then((function(t){t.success&&(e.dialogEdit=!0)})).catch((function(){e.dialogMessage=!0}))},See:function(){var t=this;if(this.onlyOne()){var e={Id:this.multipleSelection[0].id};this.GetTaskDetails(e).then((function(e){e.success&&(t.dialogView=!0)})).catch((function(){t.dialogMessage=!0}))}},handleSee:function(t){var e=this,s={Id:t.id};this.GetTaskDetails(s).then((function(t){t.success&&(e.dialogView=!0)})).catch((function(){e.dialogMessage=!0}))},closeMessage:function(t){this.dialogMessage=t},showScreen:function(){this.isScreen=!this.isScreen,this.isScreen?this.screen="收起":this.screen="筛选"},searchConditional:function(t){this.currentState=t,this.$store.commit("taskManagement/update_taskStatus",t),this.getData()},search:function(){var t=this;if(""!=this.startTime)if(""!=this.endTime){this.startTime=Object(m["g"])(this.startTime,"{y}-{m}-{d}"),this.endTime=Object(m["g"])(this.endTime,"{y}-{m}-{d}");var e={currentPage:this.currentPage,maxResultCount:this.pageSize,taskName:this.taskName,startTime:this.startTime,endTime:this.endTime};this.searchTask(e).catch((function(){t.dialogMessage=!0})),this.clearSearch()}else this.$message("请选择结束日期");else this.$message("请选择开始日期")},clearSearch:function(){this.isScreen=!this.isScreen,this.startTime="",this.endTime="",this.taskName="",this.screen="筛选"},addTask:function(){this.dialogAdd=!0},closeAdd:function(t){console.log(t),this.dialogAdd=t},getAddData:function(t){console.log(t),this.dialogAdd=t,this.dialogMessage=!0,this.getData()},getViewData:function(t){this.dialogView=t.dialogView},closeEdit:function(t){this.dialogEdit=t},getEditData:function(t){this.dialogEdit=t,this.dialogMessage=!0},changePageSize:function(t){this.pageSize=t,this.getData()},changeCurrentPage:function(t){this.currentPage=t,this.getData()},closeOperate:function(t){this.dialogOperate=t},determine:function(t){var e,s=this;this.dialogOperate=t.flag,"restart"==t.type?(e.id=this.multipleSelection[0].id,e.operate=5,this.UpdateTaskStatus(e)):"del"==t.type?this.multipleSelection.forEach((function(t){var e={id:t.id};s.deleteTask(e)})):"suspend"==t.type?(e.id=this.multipleSelection[0].id,e.operate=1,this.UpdateTaskStatus(e)):"close"==t.type?(e.id=this.multipleSelection[0].id,e.operate=4,this.UpdateTaskStatus(e)):"complete"==t.type&&(e.id=this.multipleSelection[0].id,e.operate=2,this.UpdateTaskStatus(e))},getData:function(){var t=this;console.log(this.currentPage);var e={currentPage:this.currentPage,maxResultCount:this.pageSize,status:this.currentState};this.getTaskList(e).catch((function(){t.dialogMessage=!0}))},exportData:function(){var t,e=["任务名称","任务类别","负责人","参与人","预计开始时间","预计完成时间","实际完成时间","暂停时长","任务状态"],s=["name","typeStr","person","participants","planStartTime","planEndTime","endTime","suspendTimeStr","statusStr"],a="任务列表";t=0==this.multipleSelection.length?this.taskList:this.multipleSelection,Object(m["b"])(e,s,t,a)}}),mounted:function(){console.log(this.currentPage),this.pageSize=this.pageData[0],this.getData()}},ot=it,nt=(s("de26"),Object(k["a"])(ot,a,i,!1,null,"7abf0cbf",null));e["default"]=nt.exports},de26:function(t,e,s){"use strict";var a=s("b649"),i=s.n(a);i.a},de84:function(t,e,s){"use strict";var a=s("c458"),i=s.n(a);i.a},e966:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"choosePeople-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"选择路线",visible:t.dialogArea,"before-close":t.closeChooseArea},on:{"update:visible":function(e){t.dialogArea=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"content_box"},[s("div",{staticClass:"table-box"},[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.areaList,stripe:!0,"tooltip-effect":"dark",height:"400","highlight-current-row":!0},on:{"row-click":t.clickRow}},[s("el-table-column",{attrs:{align:"center",prop:"name",label:"片区名称"}}),s("el-table-column",{attrs:{align:"center",prop:"pipelineLength",label:"管道长度"}}),s("el-table-column",{attrs:{align:"center",prop:"pointCount",label:"设备点数量"}}),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["view"==t.type?s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v("查看")]):t._e(),"choose"==t.type?s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleChoose(e.row)}}},[t._v("选择设备")]):t._e()]}}])})],1)],1),s("page",{attrs:{"page-data":[30,40,50,100],total:t.areaTotal},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeChooseArea}},[t._v("返回")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determine}},[t._v("确 定")])],1)]),s("view-route",{attrs:{"dialog-route":t.dialogRoute,typestr:t.typeStr,"type-Str":t.choosetype},on:{getRouteData:t.getRouteData}})],1)},i=[],o=s("5530"),n=s("7a3b"),l=s("597c"),c=s("2f62"),r=Object(c["a"])("xunjianPublic"),d=r.mapState,p=Object(c["a"])("area"),m=p.mapActions,h={name:"ChooseArea",props:{dialogArea:{type:Boolean,default:!1},type:{type:String,default:"view"},choosetype:{type:String,default:"single"}},components:{Page:n["a"],ViewRoute:l["a"]},data:function(){return{searchWords:"",areaInfo:"",dialogRoute:!1,typeStr:"",equiInfo:[],conInfo:[],devInfo:""}},computed:Object(o["a"])({},d(["areaList","areaTotal"])),methods:Object(o["a"])(Object(o["a"])({},m(["getAreaDetailInfo"])),{},{closeChooseArea:function(){var t={dialogArea:!1};this.$emit("closeChooseArea",t)},clickRow:function(t){this.areaInfo=t,this.equiInfo="",this.conInfo="",this.devInfo=""},determine:function(){if("choose"==this.type){if(""==this.areaInfo)return void alert("请选择巡检片区！");if("single"==this.choosetype){if(""==this.devInfo)return void alert("请选择设备或管道！");var t={dialogArea:!1,type:"choose",typestr:"single",areaInfo:this.areaInfo,devInfo:this.devInfo};this.$emit("checkedArea",t)}else if("multiple"==this.choosetype){if(""==this.conInfo||""==this.equiInfo)return void alert("请选择巡检片区！");var e={areaInfo:this.areaInfo,equiInfo:this.equiInfo,conInfo:this.conInfo,dialogArea:!1,type:"choose",typestr:"multiple"};this.$emit("checkedArea",e)}}else if("view"==this.type){if(""==this.areaInfo)return void alert("请选择巡检片区！");var s={areaInfo:this.areaInfo,dialogArea:!1,type:"view"};this.$emit("checkedArea",s)}},changePageSize:function(t){console.log(t)},changeCurrentPage:function(t){console.log(t)},handleSee:function(t){console.log(t);var e={Id:t.id};this.getAreaDetailInfo(e),this.typeStr="view",this.dialogRoute=!0},handleChoose:function(t){var e={Id:t.id};this.getAreaDetailInfo(e),this.typeStr="choose",this.dialogRoute=!0},getRouteData:function(t){console.log(t),this.dialogRoute=t.dialogRoute,"choose"==this.typeStr&&("single"==t.type?this.devInfo=t.devInfo:"multiple"==t.type&&(this.equiInfo=t.equiInfo,this.conInfo=t.conInfo))}}),mounted:function(){}},u=h,v=(s("2f84"),s("2877")),g=Object(v["a"])(u,a,i,!1,null,"1d646d03",null);e["a"]=g.exports}}]);
//# sourceMappingURL=chunk-679c6a31.88afb219.js.map