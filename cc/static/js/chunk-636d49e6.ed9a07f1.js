(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-636d49e6"],{"2d30":function(t,e,s){},"2d4c":function(t,e,s){"use strict";var i=s("7336"),a=s.n(i);a.a},"3b36":function(t,e,s){},"4b68":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eventManagement-box button-box"},[s("div",{staticClass:"header-box"},[s("div",{staticClass:"header-left"},[s("el-button-group",t._l(t.statusList,(function(e,i){return s("el-button",{key:i,class:{"item-active":i==t.currentIndex},attrs:{type:"primary",plain:""},on:{click:function(e){return t.searchConditional(i)}}},[t._v(" "+t._s(e)+" ")])})),1),s("el-button",{staticClass:"screen-button",attrs:{type:"primary",plain:""},on:{click:t.showScreen}},[t._v(t._s(t.screen))])],1),s("div",{staticClass:"header-right"},[s("el-button-group",[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.close}},[t._v("关闭")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.transfer}},[t._v("转工单")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.See}},[t._v("查看")]),s("el-button",{attrs:{type:"primary",plain:""}},[t._v("导出")])],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isScreen,expression:"isScreen"}],staticClass:"screen-box select_box"},[s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("报告人：")]),s("div",{staticClass:"item-content"},[""!=t.person?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.person,callback:function(e){t.person=e},expression:"person"}},[t._v(t._s(t.person))]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v(" 选择人员 ")])],1)]),s("div",{staticClass:"item has-two"},[t._m(0),s("div",{staticClass:"item-content"},[s("el-select",{attrs:{placeholder:"请选择异常类型"},on:{change:t.selectType},model:{value:t.exceptionType,callback:function(e){t.exceptionType=e},expression:"exceptionType"}},t._l(t.exceptionTypeData,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),s("div",{staticClass:"item-box"},[s("div",{staticClass:"item has-two"},[s("div",{staticClass:"item-title"},[t._v("提交时间：")]),s("div",{staticClass:"item-content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"提交时间"},model:{value:t.submissionTime,callback:function(e){t.submissionTime=e},expression:"submissionTime"}})],1)])]),s("div",{staticClass:"button-group-box"},[s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.search}},[t._v("搜索")]),s("el-button",{attrs:{type:"primary",plain:""}},[t._v("清空")])],1)]),s("div",{staticClass:"content-box"},[s("div",{staticClass:"table-box"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.eventList,stripe:!0,border:"","tooltip-effect":"dark",height:"830"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),s("el-table-column",{attrs:{prop:"typeStr",label:"事件类型","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"creationName",label:"报告人","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"creationTime",label:"事件提交时间","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"errorType",label:"异常类型","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"predictWaterLoss",label:"预估损失水量","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"statusStr",label:"事件状态","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operate-box"},[s("el-button",{class:["operate-button",1!=e.row["status"]?"operate-button-active":""],attrs:{type:"text",disabled:1!=e.row["status"]?t.disabledTrue:t.disabledFalse},on:{click:function(s){return t.handleTran(e.row)}}},[t._v(" 转工单 ")]),s("el-button",{class:["operate-button",1==e.row["status"]?"":"operate-button-active"],attrs:{type:"text",disabled:1==e.row["status"]?t.disabledFalse:t.disabledTrue},on:{click:function(s){return t.handleClose(e.row)}}},[t._v(" 关闭 ")]),s("el-button",{staticClass:"operate-button",attrs:{type:"text"},on:{click:function(s){return t.handleSee(e.row)}}},[t._v(" 查看 ")])],1)]}}])})],1)],1),s("div",{staticClass:"page-box"},[s("page",{attrs:{"page-data":[30,40,50,100],total:t.eventListTotal},on:{changePageSize:t.changePageSize,changeCurrentPage:t.changeCurrentPage}})],1)]),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("operate",{attrs:{"dialog-operate":t.dialogOperate,"operate-type":t.operateType,message:t.messageT},on:{closeOperate:t.closeOperate,determine:t.determine}}),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":"single"},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("transfer-order",{attrs:{"dialog-transfer":t.dialogTransfer},on:{closeTransfer:t.closeTransfer,checkedTansfer:t.checkedTransfer}}),s("view-detail",{attrs:{"dialog-view":t.dialogView},on:{closeView:t.closeView}}),s("tips",{attrs:{"dialog-tips":t.dialogTips,msg:"请确认操作"},on:{closeTips:t.closeTips}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-title"},[s("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 异常类型： ")])}],l=s("5530"),o=s("f5e4"),n=s("7a3b"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tips-dialog-box"},[s("el-dialog",{attrs:{title:"提示",visible:t.dialogTips,width:"20%"},on:{"update:visible":function(e){t.dialogTips=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"cancel-box",on:{click:t.closeTips}},[s("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]),s("div",{staticClass:"text-box"},[s("span",[t._v(t._s(t.msg))])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeTips}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.closeTips}},[t._v("确 定")])],1)])],1)},r=[],d={name:"TipsDialog",props:["dialogTips","msg"],methods:{closeTips:function(){var t=!1;this.$emit("closeTips",t)}}},v=d,p=(s("c7b6"),s("2877")),m=Object(p["a"])(v,c,r,!1,null,"37fd5278",null),u=m.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box"},[s("div",{staticClass:"dialog-box dialog_box button-box"},[s("el-dialog",{attrs:{title:"转工单",visible:t.dialogTransfer,"before-close":t.closeTransfer},on:{"update:visible":function(e){t.dialogTransfer=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"content_box select_box"},[s("div",[s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("工单类型：")])]),s("div",{staticClass:"content"},[s("div",{staticClass:"list-item-content-box"},[s("el-select",{attrs:{placeholder:"请选择工单类型"},on:{change:t.selectType},model:{value:t.orderType,callback:function(e){t.orderType=e},expression:"orderType"}},t._l(t.orderTypeData,(function(t,e){return s("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("负责人：")])]),s("div",{staticClass:"content"},[""!=t.inCharge?s("el-button",{staticClass:"choose-active",attrs:{type:"primary",plain:""},model:{value:t.inCharge,callback:function(e){t.inCharge=e},expression:"inCharge"}},[t._v(t._s(t.inCharge))]):t._e(),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.choosePerson}},[t._v("选择人员")])],1)]),s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",{staticClass:"tips"},[t._v("*")]),s("span",[t._v("预计完成时间：")])]),s("div",{staticClass:"content"},[s("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"预计完成时间"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("备注：")])]),s("div",{staticClass:"conten"},[s("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"items-box"},[s("div",{staticClass:"title"},[s("span",[t._v("附件上传：")])]),s("div",{staticClass:"conten"},[s("upload",{ref:"upload",on:{showPreview:t.showPreview}})],1)])])]),s("div",{staticClass:"list-box"},[s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备名称：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceName))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备编号：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceCode))])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点坐标：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.devicePoint))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("地址：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.address))])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceStatusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("异常类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.errorType))])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.typeStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件提交时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v("2019-01-01 9:00")])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("报告人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.createUser))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("联系方式：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.phone))])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v("转工单")])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("提交工单时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v("2019-01-01 9:00")])])])]),s("div",{staticClass:"list-item has-two-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("预估损失水量：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.predictWaterLoss))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("巡检内容：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.content))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("附件：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"enclosure-box"},t._l(t.eventDetails.resourcelist,(function(e,i){return s("div",{key:i,staticClass:"enclosure-item"},[s("div",{staticClass:"enclosure-title"},[t._v(t._s(e.fileName))]),s("div",{staticClass:"enclosure-download"},[t._v("下载")]),s("div",{staticClass:"enclosure-preview"},[t._v("预览")])])})),0)])])])])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeTransfer}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.determineTransfer}},[t._v("确 定")])],1)])],1),s("message",{attrs:{"dialog-message":t.dialogMessage,message:t.messageText},on:{closeMessage:t.closeMessage}}),s("choose-people",{attrs:{"dialog-charge":t.dialogCharge,"select-type":"single"},on:{closeChoosePeople:t.closeChoosePeople,checkedPerson:t.checkedPerson}}),s("preview",{attrs:{"dialog-preview":t.dialogPreview,"file-data":t.fileData},on:{closePreview:t.closePreview}})],1)},g=[],C=s("9f5d"),f=s("c77e"),b=s("6e6c"),_=s("2f62"),w=s("ed08"),y=Object(_["a"])("eventManagement"),T=y.mapState,x=y.mapActions,D=Object(_["a"])("xunjianPublic"),k=D.mapActions,S={name:"TransferOrder",props:["dialogTransfer"],components:{ChoosePeople:o["a"],Upload:C["a"],Preview:f["a"],Message:b["a"]},computed:Object(l["a"])({},T(["orderTypeData","eventDetails","messageText"])),data:function(){return{inCharge:"",personInfo:{},remarks:"",dialogCharge:!1,orderType:1,dialogPreview:!1,fileData:"",dialogMessage:!1,endTime:""}},methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},x(["UpdateEvent"])),k(["getOrganizationData","getRoleData","setMessage"])),{},{closeTransfer:function(){console.log("点击了取消");var t={dialogTransfer:!1,data:[]};this.$emit("closeTransfer",t)},choosePerson:function(){this.getOrganizationData(),this.getRoleData(),this.dialogCharge=!0},closeChoosePeople:function(t){this.dialogCharge=t.dialogCharge},checkedPerson:function(t){console.log(t),this.dialogCharge=t.dialogCharge,this.inCharge=t.personinfo[0].trueName,this.personInfo=t.personinfo[0]},closeMessage:function(t){this.dialogMessage=t},showPreview:function(t){this.dialogPreview=t.flag,this.fileData=t.data},closePreview:function(t){this.dialogPreview=t},selectType:function(t){this.orderType=t},determineTransfer:function(){var t=this;if(console.log(this.orderType),console.log(this.inCharge),""==this.inCharge)return this.setMessage("请选择负责人"),void(this.dialogMessage=!0);if(""==this.orderType)return this.setMessage("请选择工单类型"),void(this.dialogMessage=!0);if(""==this.endTime)return this.setMessage("请选择预计完成时间"),void(this.dialogMessage=!0);var e=Object(w["g"])(this.endTime,"{y}-{m}-{d} {h}:{i}"),s={Id:this.eventDetails.id,status:2,type:this.orderType,personId:this.personInfo.id,person:this.personInfo.trueName,planCompleteTime:e,content:this.remarks};this.UpdateEvent(s).catch((function(){t.dialogMessage=!0})),this.$emit("checkedTransfer",!1)}})},M=S,P=(s("2d4c"),Object(p["a"])(M,h,g,!1,null,"19c504f4",null)),O=P.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addTask-box dialog-box button-box"},[s("el-dialog",{attrs:{title:"事件详情",visible:t.dialogView,"before-close":t.closeView},on:{"update:visible":function(e){t.dialogView=e}}},[s("div",{staticClass:"content-box form-box"},[s("div",{staticClass:"list-box"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备名称：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceName))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备编号：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceCode))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备坐标：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.devicePoint))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("地址：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.address))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("设备点状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.deviceStatusStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("异常类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.errorType))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件类型：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.typeStr))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件提交时间：")]),s("div",{staticClass:"item-content"},[s("span",[t._v("2019-01-01 18:00")])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("报告人：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.creationName))])])]),s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("联系方式：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.phone))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items has-two-item"},[s("div",{staticClass:"item-title"},[t._v("事件状态：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.statusStr))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("预估损失水量：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.predictWaterLoss))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("巡检内容：")]),s("div",{staticClass:"item-content"},[s("span",[t._v(t._s(t.eventDetails.content))])])])]),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-items"},[s("div",{staticClass:"item-title"},[t._v("附件：")]),s("div",{staticClass:"item-content"},[s("div",{staticClass:"enclosure-box"},t._l(t.eventDetails.resourcelist,(function(e,i){return s("div",{key:i,staticClass:"enclosure-item"},[s("div",{staticClass:"enclosure-title"},[t._v(t._s(e.fileName))]),s("div",{staticClass:"enclosure-download"},[t._v("下载")]),s("div",{staticClass:"enclosure-preview"},[t._v("预览")])])})),0)])])])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closeView}},[t._v("取 消")])],1)])],1)},I=[],E=Object(_["a"])("eventManagement"),L=E.mapState,N={name:"ViewDetail",props:["dialogView"],data:function(){return{}},computed:Object(l["a"])({},L(["eventDetails"])),methods:{closeView:function(){var t=!1;this.$emit("closeView",t)}}},V=N,$=(s("dd56"),Object(p["a"])(V,j,I,!1,null,"3fd26aad",null)),z=$.exports,R=s("2f15"),U=Object(_["a"])("eventManagement"),G=U.mapState,F=U.mapActions,A=Object(_["a"])("xunjianPublic"),H=A.mapActions,W={name:"EventManagement",components:{ChoosePeople:o["a"],Page:n["a"],TransferOrder:O,ViewDetail:z,Tips:u,Message:b["a"],Operate:R["a"]},computed:Object(l["a"])({},G(["exceptionTypeData","eventList","messageText","eventListTotal","loading"])),data:function(){return{currentIndex:0,statusList:["全部","待处理","转工单","已关闭"],disabledTrue:!0,disabledFalse:!1,screen:"筛选",isScreen:!1,dialogCharge:!1,person:"",personInfo:"",exceptionType:0,submissionTime:"",multipleSelection:[],dialogTransfer:!1,dialogView:!1,dialogTips:!1,dialogMessage:!1,dialogOperate:!1,operateType:"",messageT:"请确认操作",currentPage:1,pageSize:30,closeId:"",isRow:!1}},methods:Object(l["a"])(Object(l["a"])(Object(l["a"])({},F(["GetEventList","GetEventDetails","UpdateEvent","setMessage"])),H(["getOrganizationData","getRoleData"])),{},{searchConditional:function(t){this.currentIndex=t;var e={pageIndex:1,maxResultCount:30};0!=this.currentIndex&&(e.status=this.currentIndex),this.GetEventList(e)},showScreen:function(){this.isScreen=!this.isScreen,this.isScreen?this.screen="收起":this.screen="筛选"},closeMessage:function(t){this.dialogMessage=t},search:function(){var t=Object(w["g"])(this.submissionTime,"{y}-{m}-{d}"),e={errorType:this.exceptionType,creationName:this.personInfo.trueName,creationTime:t,pageIndex:1,maxResultCount:30};this.GetEventList(e),this.isScreen=!this.isScreen},onlyOne:function(){return 0==this.multipleSelection.length?(this.setMessage("请选择要操作数据"),this.dialogMessage=!0,!1):!(this.multipleSelection.length>1)||(this.setMessage("只能选择一行数据"),this.dialogMessage=!0,!1)},close:function(){this.isRow=!1,this.onlyOne()&&(1!=this.multipleSelection[0].status?(this.setMessage("该状态不能关闭"),this.dialogMessage=!0):(this.messageT="确认要关闭事件类型的事件？",this.operateType="close",this.dialogOperate=!0))},handleClose:function(t){this.isRow=!0,this.closeId=t.Id,this.messageT="确认要关闭事件类型的事件？",this.operateType="close",this.dialogOperate=!0},transfer:function(){var t=this;if(this.onlyOne())if(1!=this.multipleSelection[0].status)this.setMessage("该状态无法转工单"),this.dialogMessage=!0;else{var e={Id:this.multipleSelection[0].id};this.GetEventDetails(e).then((function(e){e.success&&(t.dialogTransfer=!0)})).catch((function(){t.dialogMessage=!0}))}},handleTran:function(t){var e=this,s={Id:t.id};this.GetEventDetails(s).then((function(t){t.success&&(e.dialogTransfer=!0)})).catch((function(){e.dialogMessage=!0}))},See:function(){var t=this;if(this.onlyOne()){var e={Id:this.multipleSelection[0].id};this.GetEventDetails(e).then((function(e){e.success&&(t.dialogView=!0)})).catch((function(){t.dialogMessage=!0}))}},handleSee:function(t){var e=this,s={Id:t.id};this.GetEventDetails(s).then((function(t){t.success&&(e.dialogView=!0)})).catch((function(){e.dialogMessage=!0}))},choosePerson:function(){this.getOrganizationData(),this.getRoleData(),this.dialogCharge=!0},closeChoosePeople:function(t){console.log(t),this.dialogCharge=t.dialogCharge},checkedPerson:function(t){console.log(t),this.person=t.personinfo[0].trueName,this.personInfo=t.personinfo,this.dialogCharge=t.dialogCharge},selectType:function(t){this.exceptionType=t},closeOperate:function(t){this.dialogOperate=t},closeTransfer:function(t){this.dialogTransfer=t.dialogTransfer},checkedTransfer:function(t){this.dialogTransfer=t},handleSelectionChange:function(t){this.multipleSelection=t,console.log(this.multipleSelection)},changePageSize:function(t){this.pageSize=t,this.getData()},changeCurrentPage:function(t){this.currentPage=t,this.getData()},closeView:function(t){this.dialogView=t},closeTips:function(t){this.dialogTips=t},determine:function(t){var e=this;if(this.dialogOperate=t.flag,"close"==t.type){var s;s=this.isRow?this.closeId:this.multipleSelection[0].id;var i={Id:s,status:3};this.UpdateEvent(i).then((function(t){t.success&&(e.dialogMessage=!0)})).catch((function(){e.dialogMessage=!0}))}},getData:function(){var t=this,e={pageIndex:this.currentPage,maxResultCount:this.pageSize,status:this.currentIndex};this.GetEventList(e).catch((function(){t.dialogMessage=!0}))},exportData:function(){var t,e=["事件类型","报告人","事件提交时间","异常类型","预估损失水量","事件状态"],s=["typeStr","person","creationTime","errorType","predictWaterLoss","statusStr"],i="事件列表";t=0==this.multipleSelection.length?this.eventList:this.multipleSelection,Object(w["b"])(e,s,t,i)}}),mounted:function(){this.getData()}},J=W,q=(s("8d97"),Object(p["a"])(J,i,a,!1,null,"91645e3a",null));e["default"]=q.exports},"4f08":function(t,e,s){},"6e6c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"promptMessage-box"},[s("el-dialog",{attrs:{title:"提示",visible:t.dialogMessage,"before-close":t.closeMessage},on:{"update:visible":function(e){t.dialogMessage=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"message-box"},[s("div",{staticClass:"icon-box"},[s("i",{staticClass:"el-icoon el-icon-warning-outline"})]),s("div",{staticClass:"message"},[t._v(t._s(t.message))])])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.closeMessage}},[t._v("确 定")])],1)])],1)},a=[],l={props:["dialogMessage","message"],methods:{closeMessage:function(){var t=!1;this.$emit("closeMessage",t)}}},o=l,n=(s("b3ba"),s("2877")),c=Object(n["a"])(o,i,a,!1,null,null,null);e["a"]=c.exports},7336:function(t,e,s){},"81d4":function(t,e,s){},"8d97":function(t,e,s){"use strict";var i=s("3b36"),a=s.n(i);a.a},"9f5d":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-box"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,multiple:t.multiple,limit:t.limit,"show-file-list":t.showList,"on-success":t.handleSuccess,"on-err":t.handleError}},[s("el-button",{attrs:{size:"small",type:"primary"}},[s("i",{staticClass:"el-icon-plus icon-text"}),t._v(" 点击上传 ")])],1),0!=t.fileListData.length?s("div",{staticClass:"list-box"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fileListData}},[s("el-table-column",{attrs:{prop:"fileName",label:"文件名"}}),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.showPreview(e.row)}}},[t._v("预览")]),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return t.download(e.row)}}},[t._v("下载")]),s("el-button",{attrs:{type:"primary"}},[t._v("删除")])]}}],null,!1,2637127182)})],1)],1):t._e()],1)},a=[],l=(s("4160"),s("159b"),s("5530")),o=s("2f62"),n=Object(o["a"])("upload"),c=n.mapState,r=n.mapActions,d={name:"upload",data:function(){return{showList:!1,multiple:!0,limit:3,listData:[]}},computed:Object(l["a"])({},c(["fileListData","actionUrl"])),methods:Object(l["a"])(Object(l["a"])({},r(["setFileListData","downloadFile"])),{},{handleSuccess:function(t){var e=this;t.result.items.forEach((function(t){e.listData.push(t)})),this.setFileListData(this.listData)},handleError:function(t,e,s){this.$message.warning("上传失败，请重新上传！"),console.log(t),console.log(e),console.log(s)},showPreview:function(t){console.log(t);var e={flag:!0,data:t};this.$emit("showPreview",e)},download:function(t){var e={fileName:t.url,downLoadName:t.fileName};this.downloadFile(e)}})},v=d,p=(s("a909"),s("2877")),m=Object(p["a"])(v,i,a,!1,null,"6e725174",null);e["a"]=m.exports},a0cb:function(t,e,s){},a334:function(t,e,s){},a909:function(t,e,s){"use strict";var i=s("a334"),a=s.n(i);a.a},b3ba:function(t,e,s){"use strict";var i=s("a0cb"),a=s.n(i);a.a},b7c4:function(t,e,s){"use strict";var i=s("2d30"),a=s.n(i);a.a},c77e:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview-box"},[s("el-dialog",{attrs:{title:"附件预览",visible:t.dialogPreview},on:{"update:visible":function(e){t.dialogPreview=e}}},[s("div",{staticClass:"content-box"},[s("div",{staticClass:"cancel-box",on:{click:t.closePreview}},[s("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]),s("div",{staticClass:"content_box"},[s("img",{staticClass:"img",attrs:{src:t.httpUrl+t.fileData.url,alt:""}})])]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.closePreview}},[t._v("取 消")])],1)])],1)},a=[],l=s("5530"),o=s("2f62"),n=Object(o["a"])("upload"),c=n.mapState,r={name:"Preview",props:["dialogPreview","fileData"],computed:Object(l["a"])({},c(["httpUrl"])),methods:{closePreview:function(){var t=!1;this.$emit("closePreview",t)}}},d=r,v=(s("b7c4"),s("2877")),p=Object(v["a"])(d,i,a,!1,null,"e986758a",null);e["a"]=p.exports},c7b6:function(t,e,s){"use strict";var i=s("81d4"),a=s.n(i);a.a},dd56:function(t,e,s){"use strict";var i=s("4f08"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-636d49e6.ed9a07f1.js.map